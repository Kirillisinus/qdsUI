(function(){"use strict";var e={9463:function(e,t,n){var s=n(9242),o=n(3396);const a={id:"content"},i=(0,o._)("div",{id:"footer"},null,-1);function r(e,t,n,s,r,l){const c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.WI)(e.$slots,"default"),(0,o._)("div",a,[(0,o.Wm)(c)]),i],64)}var l={data(){return{socket:2}},created(){this.socket=io("https://qds-serv.herokuapp.com/")},errorHandler(e,t,n){alert(`Error: ${e.toString()}\nInfo: ${n}`)},errorCaptured(e,t,n){return"render function"===n&&setTimeout((()=>{window.location.reload()}),50),!1}},c=n(89);const d=(0,c.Z)(l,[["render",r]]);var u=d,m=n(678),h=n(7139),p=n(5713);const g={class:"lobby-view"},v={class:"btn-back"},y=(0,o.Uk)(" Назад "),f=(0,o._)("img",{src:p,alt:"logo",id:"logo-lobby"},null,-1),_={class:"lobby"},b={class:"room"},w={class:"right-side"},k={class:"count-players"},x={class:"players"},$=(0,o._)("div",{class:"adm-sign"},null,-1),C={class:"game-settings"},P=(0,o._)("div",{class:"settings-text"},"Custom settings",-1),T=(0,o._)("div",{class:"settings"},null,-1),I={class:"start-game"},M=(0,o._)("div",null,"Начать",-1),E=(0,o._)("i",{class:"icon-arrow-right"},null,-1),N=(0,o._)("div",{class:"button invite-btn"},[(0,o._)("div",null,"Пригласить"),(0,o._)("i",{class:"icon-arrow-right"})],-1);function S(e,t,n,s,a,i){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",v,[(0,o.Wm)(r,{class:"back",to:"#",onClick:i.goBack},{default:(0,o.w5)((()=>[y])),_:1},8,["onClick"]),f]),(0,o._)("div",_,[(0,o._)("div",b,[(0,o._)("div",w,[(0,o._)("div",k,"Players "+(0,h.zw)(e.getNumPlayers)+"/16",1),(0,o._)("section",x,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.getPlayers,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{id:"plyr",class:"player",key:t},[(0,o.Uk)((0,h.zw)(e.user)+" ",1),$])))),128))])]),(0,o._)("section",C,[P,T,(0,o._)("div",I,[(0,o.Wm)(r,{class:"button start-btn",to:"#",onClick:i.startGame},{default:(0,o.w5)((()=>[M,E])),_:1},8,["onClick"]),N])])])])])}var z=n(6265),B=n.n(z),D=n(65),L={data(){return{name:localStorage.name,admin:""}},watch:{admin(){setTimeout((()=>{this.updateAdminDiv()}),1e3)}},beforeMount(){},mounted(){this.$forceUpdate()},created(){this.$root.socket.on("enterMsg",((...e)=>{this.admin=e,this.$store.dispatch("reqPlayers")})),this.$root.socket.on("exitMsg",(()=>{this.$store.dispatch("reqPlayers")})),this.$root.socket.on("startMsg",((...e)=>{this.$store.dispatch("setTimeLimit",e),this.$router.push("/write")})),this.$root.socket.emit("enterLobby",this.name)},beforeUnmount(){this.$root.socket.emit("exitLobby",this.name)},methods:{startGame(){this.$store.dispatch("setRounds"),this.$root.socket.emit("startGame",localStorage.name)},goBack(){this.$router.push("/")},updateAdminDiv(){let e=document.getElementsByClassName("player");for(let t=0;t<e.length;t++){let n=e[t].textContent,s=this.admin[0];n.trim()===s&&(e[t].childNodes[1].style.display="block")}}},computed:{...(0,D.Se)(["getNumPlayers","getPlayers"])}};const U=(0,c.Z)(L,[["render",S]]);var W=U;const O={class:"entrance"},j=(0,o._)("div",{id:"header"},[(0,o._)("img",{src:p,alt:"logo",id:"logo"})],-1),A=(0,o._)("span",{class:"invite"},"Представьтесь, пожалуйста ",-1),R=(0,o._)("span",{class:"wrong-name"},"Имя уже используется, придумайте другое!",-1),Y=(0,o._)("i",{class:"icon-arrow-right"},null,-1),Z=(0,o._)("div",null,"Cоздать комнату",-1),q=(0,o._)("i",{class:"icon-arrow-right"},null,-1);function H(e,t,n,a,i,r){const l=(0,o.up)("Loader"),c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l,{id:"load"}),(0,o._)("div",O,[j,A,R,(0,o.wy)((0,o._)("input",{type:"text",class:"input-name",placeholder:"Гость123123123","onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e)},null,512),[[s.nr,i.name]]),(0,o.Wm)(c,{class:"button continue",onClick:r.saveName,to:"#"},{default:(0,o.w5)((()=>[(0,o._)("div",null,"Продолжить как "+(0,h.zw)(i.name),1),Y])),_:1},8,["onClick"]),(0,o.Wm)(c,{class:"button create-room",to:"#"},{default:(0,o.w5)((()=>[Z,q])),_:1})])],64)}const V=e=>((0,o.dD)("data-v-05853095"),e=e(),(0,o.Cn)(),e),G={class:"lds-default"},X=V((()=>(0,o._)("div",null,null,-1))),K=V((()=>(0,o._)("div",null,null,-1))),F=V((()=>(0,o._)("div",null,null,-1))),J=V((()=>(0,o._)("div",null,null,-1))),Q=V((()=>(0,o._)("div",null,null,-1))),ee=V((()=>(0,o._)("div",null,null,-1))),te=V((()=>(0,o._)("div",null,null,-1))),ne=V((()=>(0,o._)("div",null,null,-1))),se=V((()=>(0,o._)("div",null,null,-1))),oe=V((()=>(0,o._)("div",null,null,-1))),ae=V((()=>(0,o._)("div",null,null,-1))),ie=V((()=>(0,o._)("div",null,null,-1))),re=[X,K,F,J,Q,ee,te,ne,se,oe,ae,ie];function le(e,t){return(0,o.wg)(),(0,o.iD)("div",G,re)}const ce={},de=(0,c.Z)(ce,[["render",le],["__scopeId","data-v-05853095"]]);var ue=de,me={components:{Loader:ue},data(){return{name:String="Гость123123123"}},mounted(){localStorage.name&&(this.name=localStorage.name)},methods:{async saveName(){let e=document.getElementById("load"),t=document.getElementsByClassName("entrance")[0],n=document.getElementById("content");n.style.border="none",t.style.display="none",e.style.display="block";let s="https://qds-serv.herokuapp.com/login/"+this.name,o="notok";if(await B().get(s).then((s=>{o=s.data.result,e.style.display="none",t.style.display="flex",n.style.border="4px #f5d731f1 solid"})),"ok"!=o){let e=document.getElementsByClassName("wrong-name")[0],t=document.getElementsByClassName("input-name")[0];return e.style.display="inline-block",void(t.style.border="1px solid red")}localStorage.name=this.name,this.$router.push("/lobby")}}};const he=(0,c.Z)(me,[["render",H]]);var pe=he,ge=n(8171),ve=n(9885);const ye={class:"write-player-sentence"},fe={class:"up"},_e={class:"rounds"},be=(0,o._)("img",{src:p,alt:"logo",id:"logo-write"},null,-1),we=(0,o._)("img",{src:ge,alt:"ready",class:"ready-icon",id:"rdy-i"},null,-1),ke={class:"middle"},xe=(0,o._)("div",{class:"middle-logo"},[(0,o._)("img",{src:ve,alt:"logo",class:"mid-logo"}),(0,o._)("div",{class:"card"},"Write a sentence")],-1),$e={class:"input-sentence"},Ce={class:"input"},Pe=(0,o.Uk)("done");function Te(e,t,n,a,i,r){const l=(0,o.up)("baseTimer"),c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ye,[(0,o._)("div",fe,[(0,o._)("div",_e,(0,h.zw)(e.getNumRounds)+"/16",1),be,(0,o.Wm)(l,{id:"timer",class:"base-timer"}),we]),(0,o._)("div",ke,[xe,(0,o._)("div",$e,[(0,o._)("div",Ce,[(0,o.wy)((0,o._)("input",{class:"sentence",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.sentence=e)},null,512),[[s.nr,i.sentence]]),(0,o.Wm)(c,{id:"wr-bt",class:"write",to:"#",onClick:r.done},{default:(0,o.w5)((()=>[Pe])),_:1},8,["onClick"])])])])])}const Ie={id:"tim",class:"timer"},Me={viewBox:"-1 -1 2 2",class:"timer__svg donut"},Ee=(0,o._)("circle",{cx:"0",cy:"0",r:"1",fill:"#dddddd"},null,-1),Ne=["d","fill"];function Se(e,t,n,s,a,i){return(0,o.wg)(),(0,o.iD)("div",Ie,[((0,o.wg)(),(0,o.iD)("svg",Me,[Ee,(0,o._)("path",{d:i.calc,fill:a.color},null,8,Ne)]))])}var ze={data(){return{time:this.$store.getters.getTimeLimit,percent:1,color:"green",startX:1,startY:0,currentPercent:0}},methods:{getPieVal(e){const t=Math.cos(2*Math.PI*e),n=Math.sin(2*Math.PI*e);return[t,n]},start(){TweenMax.to(this.$data,this.time,{currentPercent:this.$data.percent,onComplete:this.complete,ease:Power0.easeNone})},stop(){TweenMax.pauseAll()},complete(){document.getElementById("tim").style.display="none"}},computed:{calc(){const[e,t]=this.getPieVal(this.$data.currentPercent),n=this.currentPercent>.5?1:0,s=[`M ${this.$data.startX} ${this.startY}`,`A 1 1 0 ${n} 1 ${e} ${t}`,"L 0 0"].join(" ");return s}},beforeUnmount(){},mounted(){setTimeout((()=>{this.start()}),100)}};const Be=(0,c.Z)(ze,[["render",Se]]);var De=Be,Le={data(){return{sentence:"",ready:!1}},components:{baseTimer:De},methods:{done(){document.getElementById("rdy-i").style.display="block";let e=document.getElementById("wr-bt");e.style.backgroundColor="gray",TweenMax.pauseAll();let t=document.getElementById("timer");t.style.display="none",this.ready||this.$root.socket.emit("writeSentence",this.sentence),this.ready=!0}},created(){this.$root.socket.on("goNextMsg",((...e)=>{this.ready||this.$root.socket.emit("writeSentence",this.sentence),this.$store.dispatch("setTimeLimit",e[0].round_time),this.$router.push("/"+e[0].next_page)})),this.$root.socket.on("timeIsUp",(()=>{this.ready=!0,this.$root.socket.emit("writeSentence",this.sentence)}))},mounted(){this.$forceUpdate()},beforeUnmount(){TweenMax.pauseAll()},computed:{...(0,D.Se)(["getNumRounds"])}};const Ue=(0,c.Z)(Le,[["render",Te]]);var We=Ue;const Oe={class:"draw-image"},je={class:"up"},Ae={class:"rounds"},Re=(0,o._)("img",{src:p,alt:"logo",id:"logo-write"},null,-1),Ye=(0,o._)("img",{src:ge,alt:"ready",class:"ready-icon",id:"rdy-i"},null,-1),Ze=(0,o._)("div",{class:"call-draw"},"Попробуй нарисовать!",-1),qe=(0,o._)("div",{class:"prev-sentence"},"Lorem ipsum",-1),He={class:"middle-draw"},Ve=(0,o._)("div",{id:"palette"},null,-1),Ge={class:"down"},Xe={class:"controls"},Ke={class:"btn-row"},Fe={class:"btn-row"},Je=["value","onChange"],Qe=(0,o._)("div",{class:"btn-row"},null,-1),et=(0,o.Uk)("done");function tt(e,t,n,a,i,r){const l=(0,o.up)("baseTimer"),c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",Oe,[(0,o._)("div",je,[(0,o._)("div",Ae,(0,h.zw)(e.getNumRounds)+"/16",1),Re,(0,o.Wm)(l,{id:"timer",class:"base-timer"}),Ye]),Ze,qe,(0,o._)("div",He,[Ve,(0,o._)("canvas",{id:"canvas",onMousemove:t[0]||(t[0]=e=>r.drawIfPressed(e)),height:"500",width:"900"},"Обновите браузер!",32)]),(0,o._)("div",Ge,[(0,o._)("div",Xe,[(0,o._)("div",Ke,[(0,o._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>r.clear&&r.clear(...e)),class:"back"},"Clear")]),(0,o._)("div",Fe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.sizes,(e=>((0,o.wg)(),(0,o.iD)("label",{class:"size-item",key:e},[(0,o.wy)((0,o._)("input",{type:"radio",name:"size","onUpdate:modelValue":t[2]||(t[2]=e=>i.size=e),value:e,class:"size",style:(0,h.j5)({width:e+10+"px",height:e+10+"px"}),onChange:t=>r.setSize(e)},null,44,Je),[[s.G2,i.size]])])))),128))]),Qe,(0,o.Wm)(c,{id:"d-bt",class:"write",to:"#",onClick:r.done},{default:(0,o.w5)((()=>[et])),_:1},8,["onClick"])])])])}var nt={components:{baseTimer:De},data(){return{ready:!1,size:12,sizes:[6,12,24,48],canvas:null,context:null,colors:["#ffffff","#000000","#13f7ab","#13f3f7","#13c5f7","#138cf7","#1353f7","#2d13f7","#7513f7","#a713f7","#d413f7","#f713e0","#f71397","#f7135b","#f71313","#f76213","#f79413","#f7e013"]}},created(){this.$root.socket.on("goNextMsg",((...e)=>{this.ready||this.$root.socket.emit("drawImage",this.sentence),this.$store.dispatch("setTimeLimit",e[0].round_time),this.$router.push("/"+e[0].next_page)}))},mounted(){this.$forceUpdate(),this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.context.lineCap="round",this.context.lineWidth=this.size;for(var e=document.getElementById("palette"),t=0,n=this.colors.length;t<n;t++){var s=document.createElement("div");s.className="color",s.addEventListener("click",this.changeColor),s.style.backgroundColor=this.colors[t],e.appendChild(s)}},beforeUnmount(){TweenMax.pauseAll()},methods:{done(){document.getElementById("rdy-i").style.display="block";let e=document.getElementById("d-bt");e.style.backgroundColor="gray",TweenMax.pauseAll();let t=document.getElementById("timer");t.style.display="none",this.ready||this.$root.socket.emit("drawImage"),this.ready=!0},setSize(e){this.context.lineWidth=e},changeColor(e){this.context.strokeStyle=e.target.style.backgroundColor},clear(){this.context.clearRect(0,0,canvas.width,canvas.height)},drawIfPressed(e){var t=e.offsetX,n=e.offsetY,s=e.movementX,o=e.movementY;e.buttons>0&&(this.context.beginPath(),this.context.moveTo(t,n),this.context.lineTo(t-s,n-o),this.context.stroke(),this.context.closePath())}},computed:{...(0,D.Se)(["getNumRounds"])}};const st=(0,c.Z)(nt,[["render",tt]]);var ot=st;const at={class:"lobby"},it=(0,o.Uk)(" home "),rt={class:"room"},lt={class:"players"},ct={class:"count-players"},dt={class:"album"},ut=(0,o._)("div",{class:"album-name"},"album",-1),mt=(0,o._)("div",{class:"settings"},null,-1),ht={class:"end-game"},pt={class:"end"},gt={class:"end-p"},vt=(0,o._)("button",{class:"write"},"new turn",-1);function yt(e,t,n,s,a,i){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",at,[(0,o.Wm)(r,{class:"back",to:"/"},{default:(0,o.w5)((()=>[it])),_:1}),(0,o._)("div",rt,[(0,o._)("section",lt,[(0,o._)("div",ct,"Players "+(0,h.zw)(e.getNumPlayers)+"/16",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.getPlayers,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"player",key:t},(0,h.zw)(e.user),1)))),128))]),(0,o._)("section",dt,[ut,mt,(0,o._)("div",ht,[(0,o._)("div",pt,[(0,o._)("p",gt,"end of "+(0,h.zw)(a.name)+"'s album",1)]),vt])])])])}var ft={data(){return{name:""}},mounted(){localStorage.name&&(this.name=localStorage.name)},methods:{},computed:{...(0,D.Se)(["getNumPlayers","getPlayers"])}};const _t=(0,c.Z)(ft,[["render",yt]]);var bt=_t;const wt=[{path:"/",name:"entrace",component:pe},{path:"/lobby",name:"lobby",component:W},{path:"/write",name:"write",component:We},{path:"/draw",name:"draw",component:ot},{path:"/album",name:"album",component:bt}],kt=(0,m.p7)({history:(0,m.r5)(),routes:wt});var xt=kt,$t=(0,D.MT)({state:{TIME_LIMIT:0,lobbys:[],admin_name:"",rounds:0},getters:{getTimeLimit(e){return e.TIME_LIMIT},getPlayers(e){return e.lobbys},getNumPlayers(e){return e.lobbys.length},getAdminName(e){return e.admin_name},getNumRounds(e){return e.rounds}},mutations:{updateTimeLimit(e,t){e.TIME_LIMIT=t},updatePlayers(e,t){e.lobbys=t},updateAdmin(e,t){e.admin_name=t},updateRounds(e,t){e.rounds=t}},actions:{setTimeLimit(e,t){e.commit("updateTimeLimit",t)},async reqPlayers(e){await B().get("https://qds-serv.herokuapp.com/players").then((t=>{e.commit("updatePlayers",t.data)}))},setRounds(e){e.commit("updateRounds",this.state.lobbys.length)}},modules:{}}),Ct=n(6423);(0,s.ri)(u).use($t).use(xt).use(Ct.Z,B()).mount("#app")},8171:function(e,t,n){e.exports=n.p+"img/check.5316d6f6.png"},5713:function(e,t,n){e.exports=n.p+"img/logo_transparent.e79611e3.png"},9885:function(e,t,n){e.exports=n.p+"img/pen.3e6bfdad.png"}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s](a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,s,o,a){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],a=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var d=l(n)}for(t&&t(s);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self["webpackChunkqdsui"]=self["webpackChunkqdsui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(9463)}));s=n.O(s)})();
//# sourceMappingURL=app.0aa22722.js.map