(function(){"use strict";var t={628:function(t,e,n){var s=n(9242),o=n(3396);const a={id:"content"},i=(0,o._)("div",{id:"footer"},null,-1);function r(t,e,n,s,r,l){const d=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.WI)(t.$slots,"default"),(0,o._)("div",a,[(0,o.Wm)(d)]),i],64)}var l={data(){return{socket:2}},created(){this.socket=io("https://qds-serv.herokuapp.com/")},errorHandler(t,e,n){alert(`Error: ${t.toString()}\nInfo: ${n}`)},errorCaptured(t,e,n){return"render function"===n&&setTimeout((()=>{window.location.reload()}),50),!1}},d=n(89);const c=(0,d.Z)(l,[["render",r]]);var u=c,m=n(678),h=n(7139),p=n(5713);const g={class:"lobby-view"},v={class:"btn-back"},f=(0,o.Uk)(" Назад "),y=(0,o._)("img",{src:p,alt:"logo",id:"logo-lobby"},null,-1),w={class:"lobby"},b={class:"room"},_={class:"right-side"},k={class:"count-players"},x={class:"players"},$=(0,o._)("div",{class:"adm-sign"},null,-1),C={class:"game-settings"},T=(0,o._)("div",{class:"settings-text"},"Custom settings",-1),I=(0,o._)("div",{class:"settings"},null,-1),P={class:"start-game"},M=(0,o._)("div",null,"Начать",-1),D=(0,o._)("i",{class:"icon-arrow-right"},null,-1),E=(0,o._)("div",{class:"button invite-btn"},[(0,o._)("div",null,"Пригласить"),(0,o._)("i",{class:"icon-arrow-right"})],-1);function L(t,e,n,s,a,i){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",v,[(0,o.Wm)(r,{class:"back",to:"#",onClick:i.goBack},{default:(0,o.w5)((()=>[f])),_:1},8,["onClick"]),y]),(0,o._)("div",w,[(0,o._)("div",b,[(0,o._)("div",_,[(0,o._)("div",k,"Players "+(0,h.zw)(t.getNumPlayers)+"/16",1),(0,o._)("section",x,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.getPlayers,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{id:"plyr",class:"player",key:e},[(0,o.Uk)((0,h.zw)(t.user)+" ",1),$])))),128))])]),(0,o._)("section",C,[T,I,(0,o._)("div",P,[(0,o.Wm)(r,{class:"button start-btn",to:"#",onClick:i.startGame},{default:(0,o.w5)((()=>[M,D])),_:1},8,["onClick"]),E])])])])])}var R=n(6265),U=n.n(R),N=n(65),S={data(){return{name:localStorage.name}},beforeMount(){},mounted(){this.$forceUpdate(),setTimeout((()=>{this.updateAdminDiv()}),500)},created(){this.$root.socket.on("enterMsg",((...t)=>{this.$store.dispatch("reqPlayers",t)})),this.$root.socket.on("exitMsg",((...t)=>{this.$store.dispatch("reqPlayers",t)})),this.$root.socket.on("startMsg",((...t)=>{this.$store.dispatch("setRounds"),this.$store.dispatch("setTimeLimit",t),this.$router.push("/write")})),this.$root.socket.emit("enterLobby",this.name)},beforeUnmount(){this.$root.socket.emit("exitLobby",this.name)},methods:{startGame(){this.$root.socket.emit("startGame",localStorage.name)},goBack(){this.$router.push("/")},updateAdminDiv(){let t=document.getElementsByClassName("player");for(let e=0;e<t.length;e++){let n=t[e].textContent;n.trim()==this.$store.state.admin_name&&(t[e].childNodes[1].style.display="block")}}},computed:{...(0,N.Se)(["getNumPlayers","getPlayers"])}};const z=(0,d.Z)(S,[["render",L]]);var B=z;const W={class:"entrance"},O=(0,o._)("div",{id:"header"},[(0,o._)("img",{src:p,alt:"logo",id:"logo"})],-1),A=(0,o._)("span",{class:"invite"},"Представьтесь, пожалуйста ",-1),j=(0,o._)("span",{class:"wrong-name"},"Имя уже используется, придумайте другое!",-1),Y=(0,o._)("i",{class:"icon-arrow-right"},null,-1),Z=(0,o._)("div",null,"Cоздать комнату",-1),q=(0,o._)("i",{class:"icon-arrow-right"},null,-1);function X(t,e,n,a,i,r){const l=(0,o.up)("Loader"),d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l,{id:"load"}),(0,o._)("div",W,[O,A,j,(0,o.wy)((0,o._)("input",{type:"text",class:"input-name",placeholder:"Гость123123123","onUpdate:modelValue":e[0]||(e[0]=t=>i.name=t)},null,512),[[s.nr,i.name]]),(0,o.Wm)(d,{class:"button continue",onClick:r.saveName,to:"#"},{default:(0,o.w5)((()=>[(0,o._)("div",null,"Продолжить как "+(0,h.zw)(i.name),1),Y])),_:1},8,["onClick"]),(0,o.Wm)(d,{class:"button create-room",to:"#"},{default:(0,o.w5)((()=>[Z,q])),_:1})])],64)}const H=t=>((0,o.dD)("data-v-05853095"),t=t(),(0,o.Cn)(),t),V={class:"lds-default"},G=H((()=>(0,o._)("div",null,null,-1))),K=H((()=>(0,o._)("div",null,null,-1))),F=H((()=>(0,o._)("div",null,null,-1))),J=H((()=>(0,o._)("div",null,null,-1))),Q=H((()=>(0,o._)("div",null,null,-1))),tt=H((()=>(0,o._)("div",null,null,-1))),et=H((()=>(0,o._)("div",null,null,-1))),nt=H((()=>(0,o._)("div",null,null,-1))),st=H((()=>(0,o._)("div",null,null,-1))),ot=H((()=>(0,o._)("div",null,null,-1))),at=H((()=>(0,o._)("div",null,null,-1))),it=H((()=>(0,o._)("div",null,null,-1))),rt=[G,K,F,J,Q,tt,et,nt,st,ot,at,it];function lt(t,e){return(0,o.wg)(),(0,o.iD)("div",V,rt)}const dt={},ct=(0,d.Z)(dt,[["render",lt],["__scopeId","data-v-05853095"]]);var ut=ct,mt={components:{Loader:ut},data(){return{name:String="Гость123123123"}},mounted(){localStorage.name&&(this.name=localStorage.name)},methods:{async saveName(){let t=document.getElementById("load"),e=document.getElementsByClassName("entrance")[0],n=document.getElementById("content");n.style.border="none",e.style.display="none",t.style.display="block";let s="https://qds-serv.herokuapp.com/login/"+this.name,o="notok";if(await U().get(s).then((s=>{o=s.data.result,t.style.display="none",e.style.display="flex",n.style.border="4px #f5d731f1 solid"})),"ok"!=o){let t=document.getElementsByClassName("wrong-name")[0],e=document.getElementsByClassName("input-name")[0];return t.style.display="inline-block",void(e.style.border="1px solid red")}localStorage.name=this.name,this.$router.push("/lobby")}}};const ht=(0,d.Z)(mt,[["render",X]]);var pt=ht,gt=n(8171);const vt={class:"write-player-sentence"},ft={class:"up"},yt={class:"rounds"},wt=(0,o._)("img",{src:p,alt:"logo",id:"logo-write"},null,-1),bt=(0,o._)("img",{src:gt,alt:"ready",class:"ready-icon",id:"rdy-i"},null,-1),_t={class:"middle"},kt=(0,o._)("div",{class:"middle-logo"},[(0,o._)("canvas",{id:"drawed-img"},"Обновите браузер!"),(0,o._)("div",{class:"card"},"Write a sentence")],-1),xt={class:"input"},$t=(0,o.Uk)("done");function Ct(t,e,n,a,i,r){const l=(0,o.up)("baseTimer"),d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",vt,[(0,o._)("div",ft,[(0,o._)("div",yt,(0,h.zw)(t.getCurRound)+"/"+(0,h.zw)(t.getNumRounds),1),wt,(0,o.Wm)(l,{id:"timer",class:"base-timer"}),bt]),(0,o._)("div",_t,[kt,(0,o._)("div",xt,[(0,o.wy)((0,o._)("input",{class:"sentence",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.sentence=t)},null,512),[[s.nr,i.sentence]]),(0,o.Wm)(d,{id:"wr-bt",class:"write",to:"#",onClick:r.done},{default:(0,o.w5)((()=>[$t])),_:1},8,["onClick"])])])])}const Tt={id:"tim",class:"timer"},It={viewBox:"-1 -1 2 2",class:"timer__svg donut"},Pt=(0,o._)("circle",{cx:"0",cy:"0",r:"1",fill:"#dddddd"},null,-1),Mt=["d","fill"];function Dt(t,e,n,s,a,i){return(0,o.wg)(),(0,o.iD)("div",Tt,[((0,o.wg)(),(0,o.iD)("svg",It,[Pt,(0,o._)("path",{d:i.calc,fill:a.color},null,8,Mt)]))])}var Et={data(){return{time:this.$store.getters.getTimeLimit,percent:1,color:"green",startX:1,startY:0,currentPercent:0}},methods:{getPieVal(t){const e=Math.cos(2*Math.PI*t),n=Math.sin(2*Math.PI*t);return[e,n]},start(){TweenMax.to(this.$data,this.time,{currentPercent:this.$data.percent,onComplete:this.complete,ease:Power0.easeNone})},stop(){TweenMax.pauseAll()},complete(){document.getElementById("timer").style.display="none",this.$root.socket.emit("timeIsUp")}},computed:{calc(){const[t,e]=this.getPieVal(this.$data.currentPercent),n=this.currentPercent>.5?1:0,s=[`M ${this.$data.startX} ${this.startY}`,`A 1 1 0 ${n} 1 ${t} ${e}`,"L 0 0"].join(" ");return s}},beforeUnmount(){},mounted(){setTimeout((()=>{this.start()}),100)}};const Lt=(0,d.Z)(Et,[["render",Dt]]);var Rt=Lt,Ut={data(){return{sentence:"",ready:!1}},components:{baseTimer:Rt},methods:{done(){document.getElementById("rdy-i").style.display="block";let t=document.getElementById("wr-bt");t.style.backgroundColor="gray",TweenMax.pauseAll();let e=document.getElementById("timer");e.style.display="none",this.ready||this.$root.socket.emit("writeSentence",this.sentence),this.ready=!0}},created(){this.$root.socket.on("goNextMsg",((...t)=>{this.ready||this.$root.socket.emit("writeSentence",this.sentence),this.$store.dispatch("setTimeLimit",t[0].round_time),this.$store.dispatch("setRound"),this.$router.push("/"+t[0].next_page)})),this.$root.socket.on("timeIsUp",(()=>{this.ready=!0,this.$root.socket.emit("writeSentence",this.sentence)}))},mounted(){this.$forceUpdate()},beforeUnmount(){TweenMax.pauseAll()},computed:{...(0,N.Se)(["getNumRounds","getCurRound"])}};const Nt=(0,d.Z)(Ut,[["render",Ct]]);var St=Nt;const zt={class:"draw-image"},Bt={class:"up"},Wt={class:"rounds"},Ot=(0,o._)("img",{src:p,alt:"logo",id:"logo-write"},null,-1),At=(0,o._)("img",{src:gt,alt:"ready",class:"ready-icon",id:"rdy-i"},null,-1),jt=(0,o._)("div",{class:"call-draw"},"Попробуй нарисовать!",-1),Yt=(0,o._)("div",{class:"prev-sentence"},"Lorem ipsum",-1),Zt={class:"middle-draw"},qt=(0,o._)("div",{id:"palette"},null,-1),Xt={class:"down"},Ht={class:"controls"},Vt={class:"btn-row"},Gt={class:"btn-row"},Kt=["value","onChange"],Ft=(0,o._)("div",{class:"btn-row"},null,-1),Jt=(0,o.Uk)("done");function Qt(t,e,n,a,i,r){const l=(0,o.up)("baseTimer"),d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",zt,[(0,o._)("div",Bt,[(0,o._)("div",Wt,(0,h.zw)(t.getCurRound)+"/"+(0,h.zw)(t.getNumRounds),1),Ot,(0,o.Wm)(l,{id:"timer",class:"base-timer"}),At]),jt,Yt,(0,o._)("div",Zt,[qt,(0,o._)("canvas",{id:"canvas",onMousemove:e[0]||(e[0]=t=>r.drawIfPressed(t)),onTouchmove:e[1]||(e[1]=t=>r.drawIfTouched(t)),onTouchstart:e[2]||(e[2]=t=>r.startDrawing(t)),onTouchend:e[3]||(e[3]=t=>r.stopDrawing(t)),height:"500",width:"900"},"Обновите браузер!",32)]),(0,o._)("div",Xt,[(0,o._)("div",Ht,[(0,o._)("div",Vt,[(0,o._)("button",{type:"button",onClick:e[4]||(e[4]=(...t)=>r.clear&&r.clear(...t)),class:"back"},"Clear")]),(0,o._)("div",Gt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.sizes,(t=>((0,o.wg)(),(0,o.iD)("label",{class:"size-item",key:t},[(0,o.wy)((0,o._)("input",{type:"radio",name:"size","onUpdate:modelValue":e[5]||(e[5]=t=>i.size=t),value:t,class:"size",style:(0,h.j5)({width:t+10+"px",height:t+10+"px"}),onChange:e=>r.setSize(t)},null,44,Kt),[[s.G2,i.size]])])))),128))]),Ft,(0,o.Wm)(d,{id:"d-bt",class:"write",to:"#",onClick:r.done},{default:(0,o.w5)((()=>[Jt])),_:1},8,["onClick"])])])])}var te={components:{baseTimer:Rt},data(){return{isDrawing:!1,ready:!1,size:12,sizes:[6,12,24,48],canvas:null,context:null,colors:["#ffffff","#000000","#13f7ab","#13f3f7","#13c5f7","#138cf7","#1353f7","#2d13f7","#7513f7","#a713f7","#d413f7","#f713e0","#f71397","#f7135b","#f71313","#f76213","#f79413","#f7e013"]}},created(){this.$root.socket.on("goNextMsg",((...t)=>{this.ready||this.$root.socket.emit("drawImage",this.canvas.toDataURL()),this.$store.dispatch("setTimeLimit",t[0].round_time),this.$store.dispatch("setRound"),this.$router.push("/"+t[0].next_page)})),this.$root.socket.on("timeIsUp",(()=>{this.ready=!0,this.$root.socket.emit("drawImage",this.canvas.toDataURL())}))},mounted(){this.$forceUpdate(),this.canvas=document.getElementById("canvas");var t=document.body.getBoundingClientRect();this.canvas.setAttribute("width",.65*t.width),this.context=this.canvas.getContext("2d"),this.context.lineCap="round",this.context.lineWidth=this.size;for(var e=document.getElementById("palette"),n=0,s=this.colors.length;n<s;n++){var o=document.createElement("div");o.className="color",o.addEventListener("click",this.changeColor),o.style.backgroundColor=this.colors[n],e.appendChild(o)}},beforeUnmount(){TweenMax.pauseAll()},methods:{done(){document.getElementById("rdy-i").style.display="block";let t=document.getElementById("d-bt");t.style.backgroundColor="gray",TweenMax.pauseAll();let e=document.getElementById("timer");e.style.display="none",this.ready||this.$root.socket.emit("drawImage",this.canvas.toDataURL()),this.ready=!0},setSize(t){this.context.lineWidth=t},changeColor(t){this.context.strokeStyle=t.target.style.backgroundColor},clear(){this.context.clearRect(0,0,canvas.width,canvas.height)},drawIfPressed(t){var e=t.offsetX,n=t.offsetY,s=t.movementX,o=t.movementY;t.buttons>0&&(this.context.beginPath(),this.context.moveTo(e,n),this.context.lineTo(e-s,n-o),this.context.stroke(),this.context.closePath())},startDrawing(t){t.target==canvas&&(document.body.style.overflow="hidden",this.isDrawing=!0,this.context.beginPath(),this.context.moveTo(t.touches[0].pageX-this.canvas.offsetLeft,t.touches[0].pageY-this.canvas.offsetTop))},drawIfTouched(t){if(t.target==canvas&&(document.body.style.overflow="hidden",1==this.isDrawing)){var e=t.touches[0].pageX-this.canvas.offsetLeft,n=t.touches[0].pageY-this.canvas.offsetTop;this.context.lineTo(e,n),this.context.stroke()}},stopDrawing(t){document.body.style.overflow="hidden",t.target==canvas&&(this.isDrawing=!0)}},computed:{...(0,N.Se)(["getNumRounds","getCurRound"])}};const ee=(0,d.Z)(te,[["render",Qt]]);var ne=ee;const se={class:"history-page"},oe=(0,o.Uk)(" home "),ae={class:"room"},ie=(0,o._)("section",{class:"players"},null,-1),re={class:"album"},le=(0,o._)("div",{class:"album-name"},"album",-1),de=(0,o._)("div",{class:"settings"},null,-1),ce={class:"end-game"},ue={class:"end"},me={class:"end-p"};function he(t,e,n,s,a,i){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",se,[(0,o.Wm)(r,{class:"back",to:"/"},{default:(0,o.w5)((()=>[oe])),_:1}),(0,o._)("div",ae,[ie,(0,o._)("section",re,[le,de,(0,o._)("div",ce,[(0,o._)("div",ue,[(0,o._)("p",me,"end of "+(0,h.zw)(a.name)+"'s album",1)])])])])])}var pe={components:{Loader:ut},data(){return{name:String="Гость123123123"}},mounted(){this.$forceUpdate(),localStorage.name&&(this.name=localStorage.name)},methods:{},computed:{...(0,N.Se)(["getNumPlayers","getPlayers"])}};const ge=(0,d.Z)(pe,[["render",he]]);var ve=ge;const fe=[{path:"/",name:"entrace",component:pt},{path:"/lobby",name:"lobby",component:B},{path:"/write",name:"write",component:St},{path:"/draw",name:"draw",component:ne},{path:"/album",name:"album",component:ve}],ye=(0,m.p7)({history:(0,m.r5)(),routes:fe});var we=ye,be=(0,N.MT)({state:{TIME_LIMIT:0,lobbys:[],admin_name:"",rounds:0,round:1},getters:{getTimeLimit(t){return t.TIME_LIMIT},getPlayers(t){return t.lobbys},getNumPlayers(t){return t.lobbys.length},getAdminName(t){return t.admin_name},getNumRounds(t){return t.rounds},getCurRound(t){return t.round}},mutations:{updateTimeLimit(t,e){t.TIME_LIMIT=e},updatePlayers(t,e){t.lobbys=e},updateAdmin(t,e){t.admin_name=e},updateRounds(t,e){t.rounds=e},updateRound(t){t.round++}},actions:{setTimeLimit(t,e){t.commit("updateTimeLimit",e)},async reqPlayers(t){await U().get("https://qds-serv.herokuapp.com/players").then((e=>{t.commit("updatePlayers",e.data)}))},setRounds(t){t.commit("updateRounds",this.state.lobbys.length)},setAdminName(t,e){t.commit("updateAdmin",e)},setRound(t){t.commit("updateRound")}},modules:{}}),_e=n(6423);(0,s.ri)(u).use(be).use(we).use(_e.Z,U()).mount("#app")},8171:function(t,e,n){t.exports=n.p+"img/check.5316d6f6.png"},5713:function(t,e,n){t.exports=n.p+"img/logo_transparent.e79611e3.png"}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var a=e[s]={id:s,loaded:!1,exports:{}};return t[s](a,a.exports,n),a.loaded=!0,a.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,s,o,a){if(!s){var i=1/0;for(c=0;c<t.length;c++){s=t[c][0],o=t[c][1],a=t[c][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(r=!1,a<i&&(i=a));if(r){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,o,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,a,i=s[0],r=s[1],l=s[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var c=l(n)}for(e&&e(s);d<i.length;d++)a=i[d],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},s=self["webpackChunkqdsui"]=self["webpackChunkqdsui"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(628)}));s=n.O(s)})();
//# sourceMappingURL=app.e5b1d572.js.map